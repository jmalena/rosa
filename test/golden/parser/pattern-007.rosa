--| Complex nested pattern should parse correctly.

scott list : type -> type
list a :=
  (nil  : r) ->
  (cons : a -> list a -> r) ->
  r

cons nil : {a : type} -> list a
nil {a} := \nil _ => nil

cons cons : {a : type} -> a -> list a -> list a
cons {a} x xs := \_ cons => cons x xs

flatten : tree a -> list a
flatten (cons (leaf 1) (cons 2 _)) := cons 1 (cons 2 nil)